# 武汉麻将 - 网页版

一个基于原生 JavaScript 和 Canvas 的专业武汉麻将游戏，采用现代化设计，支持单人对战 3 个 AI 玩家。

## 🎯 游戏特色

### 正宗武汉麻将规则

- **牌型完整**: 万、条、筒（1-9）+ 字牌（东南西北中发白）
- **癞子系统**: 翻牌确定癞子，支持复杂的癞子使用规则
- **红中杠牌**: 红中天生为杠牌，可翻倍得分
- **吃碰限制**: 未吃碰可任意使用癞子，已吃碰最多用 1 张癞子
- **严格轮转**: 四人顺时针轮转，严格按麻将规则进行

### 🎮 游戏功能

- **智能 AI**: 3 个电脑玩家具备完整的麻将逻辑
- **现代化界面**: 响应式设计，适配各种屏幕尺寸
- **真实麻将桌**: 仿真实麻将桌设计，中央牌河区域
- **完整操作**: 支持暗杠、自摸胡牌、吃碰杠胡等所有操作
- **智能提示**: Toast通知系统，优雅的操作反馈
- **专业布局**: Lovable设计系统，现代化UI组件

## 武汉麻将规则详解

### 基本规则

1. **牌数**: 136 张牌（无花牌和空白牌）
2. **玩家**: 4 人游戏
3. **手牌**: 每人 13 张，庄家开局额外摸 1 张（14 张）

### 癞子规则

1. **翻牌确定**: 所有玩家拿完牌后，庄家翻开牌堆第一张牌
2. **癞子确定**: 翻开牌的下一张为癞子（按顺序循环）
   - 数字牌: 1→2→3...→9→1
   - 字牌: 东 → 南 → 西 → 北 → 中 → 发 → 白 → 东
3. **使用限制**:
   - **未吃碰过**: 可使用任意数量的癞子
   - **已吃碰过**: 最多只能使用 1 张癞子
   - **多余癞子**: 必须杠出来翻倍（如果不能当普通牌使用）

### 红中特殊规则

- **天生杠牌**: 红中本身就是杠牌，有翻倍效果
- **双重身份**: 如果红中也是癞子，既可当癞子用，也可杠牌翻倍
- **策略选择**: 玩家需要在使用癞子和杠牌翻倍之间做选择

### 胡牌规则

- **基本牌型**: 4 个面子 + 1 个对子（14 张牌）
- **面子类型**:
  - 刻子（三张相同牌）
  - 顺子（三张连续数字牌，仅限万条筒）
- **癞子胡牌**: 癞子可替代任意牌组成面子和对子

## 技术实现

### 项目结构

```
├── index.html          # 游戏主页面
├── css/
│   └── style.css       # 游戏样式
├── js/
│   ├── card.js         # 牌类定义和基础操作
│   ├── deck.js         # 牌堆管理和洗牌逻辑
│   ├── player.js       # 玩家类和操作逻辑
│   ├── laizi.js        # 癞子管理和使用规则
│   ├── game.js         # 游戏主逻辑和状态管理
│   ├── main.js         # UI控制器和Canvas绘制
│   ├── tile-renderer.js # 现代化麻将牌渲染器
│   └── toast.js        # Toast通知系统
└── README.md           # 项目说明文档
```

### 核心技术

- **原生 JavaScript**: 无第三方依赖，纯原生实现
- **响应式Canvas**: 自适应屏幕尺寸的高性能图形渲染
- **现代化CSS**: 借鉴Lovable和Shadcn设计系统
- **面向对象设计**: 模块化架构，易于维护和扩展
- **状态机模式**: 清晰的游戏状态管理
- **Toast通知**: 优雅的用户交互反馈系统

### 关键算法

1. **胡牌判断**: 使用递归回溯算法检查所有可能的牌型组合
2. **癞子优化**: 智能计算最佳癞子使用方案
3. **AI 决策**: 基于概率的智能 AI 出牌策略
4. **手牌管理**: 严格的13/14张手牌轮转机制
5. **暗杠检测**: 实时检测可暗杠牌型

## 🎨 游戏界面

### 现代化设计

- **专业首页**: 游戏标题、规则介绍、特色展示
- **真实麻将桌**: 仿真实麻将桌的中央牌河设计
- **响应式布局**: 自适应各种屏幕尺寸，麻将牌大小动态调整
- **方位标识**: 清晰显示四个玩家的位置（你、电脑1、电脑2、电脑3）
- **现代化按钮**: Shadcn风格的按钮设计，hover动画效果
- **Toast通知**: 优雅的操作反馈，替代传统alert弹窗

### 界面布局

- **游戏头部**: 金色渐变标题 + 规则介绍 + 特色展示
- **中央牌河**: 四个玩家的打牌区域，按真实麻将桌布局
  - 下方区域: 你的打牌区
  - 右侧区域: 电脑1的打牌区
  - 上方区域: 电脑2的打牌区
  - 左侧区域: 电脑3的打牌区
- **玩家手牌**: 底部显示，大号麻将牌，易于点击
- **AI 手牌**: 三个方向显示牌背，大小适中
- **癞子信息**: 左侧显示翻牌和癞子信息
- **操作按钮**: 现代化控制面板，智能启用/禁用

### 🎮 操作说明

#### 基本操作
1. **开始游戏**: 点击启动界面的"开始游戏"按钮
2. **选择牌**: 点击手牌选择要打出的牌（会高亮显示）
3. **出牌**:
   - 方法1: 选中牌后点击"出牌"按钮
   - 方法2: 双击同一张牌直接打出

#### 高级操作
4. **暗杠**: 在你的回合时，如果有4张相同的牌，点击"杠"按钮
5. **自摸胡牌**: 在你的回合时，点击"胡"按钮检查是否可以胡牌
6. **响应他人出牌**:
   - 其他玩家出牌后，如果可以吃、碰、杠、胡，相应按钮会启用
   - 点击对应按钮进行操作
   - 或等待5秒自动跳过

#### 智能提示
- **成功操作**: 绿色Toast提示
- **错误提示**: 红色Toast提示
- **警告信息**: 黄色Toast提示
- **游戏信息**: 蓝色Toast提示

## 安装和运行

### 环境要求

- 现代浏览器（支持 Canvas 2D API）
- 无需安装任何软件或插件

### 运行方法

1. **直接打开**: 双击 `index.html` 文件
2. **本地服务器**:
   ```bash
   # 使用Python启动本地服务器
   python -m http.server 8000
   # 或使用Node.js
   npx http-server
   ```
3. **在线部署**: 上传到任意 Web 服务器

## 开发调试

### 调试模式

打开浏览器开发者工具（F12），在控制台可以看到详细的游戏日志：

- 玩家回合切换
- 出牌和摸牌过程
- AI 决策过程
- 胡牌判断详情
- 错误信息和警告

### 常见问题

1. **AI 不出牌**: 检查控制台是否有错误信息
2. **界面显示异常**: 确认浏览器支持 Canvas 2D API
3. **操作无响应**: 查看控制台错误日志

## 🖼️ 游戏特色展示

### 视觉效果

- 🀄 **精美麻将牌**: 响应式大小，清晰易读的中文字符
- 🎯 **癞子标识**: 红色边框和"癞"字标记
- ⚡ **实时高亮**: 最新出牌黄色边框+"最新"标识
- 📊 **信息展示**: 手牌数、剩余牌数、当前玩家等
- 🎨 **现代设计**: 渐变背景、阴影效果、圆角边框
- 🔄 **动画效果**: 按钮hover动画、Toast滑入动画

### 用户体验

- **响应式设计**: 完美适配桌面和移动设备
- **智能反馈**: Toast通知系统，告别传统弹窗
- **直观操作**: 大号按钮，清晰的启用/禁用状态
- **真实感受**: 仿真麻将桌布局，身临其境的游戏体验

## 未来规划

### 🚀 已完成功能

- [x] **完整麻将规则**: 武汉麻将所有规则实现
- [x] **智能AI系统**: 四人麻将对战
- [x] **现代化界面**: 响应式设计 + Toast通知
- [x] **真实麻将桌**: 仿真布局 + 方位标识
- [x] **完整操作**: 暗杠、自摸、吃碰杠胡
- [x] **手牌管理**: 严格13/14张轮转机制
- [x] **视觉优化**: 大号麻将牌 + 动画效果

### 📋 待实现功能

- [ ] 网络多人游戏
- [ ] 更智能的 AI 算法
- [ ] 音效和背景音乐
- [ ] 游戏统计和记录
- [ ] 自定义规则设置
- [ ] 胡牌番数计算
- [ ] 游戏回放功能

### 🔧 优化方向

- [ ] 性能优化（大型Canvas优化）
- [ ] 更多动画效果
- [ ] 移动端手势操作
- [ ] 更多麻将变种支持
- [ ] AI难度选择

## 贡献指南

欢迎提交 Issue 和 Pull Request！

### 开发环境搭建

1. Clone 项目
2. 在浏览器中打开`index.html`
3. 开始开发和调试

### 代码规范

- 使用 ES6+语法
- 遵循面向对象设计原则
- 添加适当的注释
- 保持代码简洁清晰

## 许可证

MIT License

## 联系方式

如有问题或建议，请通过以下方式联系：

- 提交 GitHub Issue
- 发送邮件反馈

---

## 🏆 项目亮点

这个武汉麻将项目的独特之处在于：

- **🎯 规则正宗**: 严格按照武汉麻将规则实现
- **🎨 设计现代**: 借鉴Lovable和Shadcn的现代化设计理念
- **⚡ 体验流畅**: 响应式设计 + 智能Toast通知
- **🀄 布局真实**: 仿真实麻将桌的中央牌河设计
- **🧠 AI智能**: 完整的麻将逻辑和决策系统
- **📱 适配完美**: 各种屏幕尺寸的完美适配

**享受专业的武汉麻将体验！** 🀄🎮✨
